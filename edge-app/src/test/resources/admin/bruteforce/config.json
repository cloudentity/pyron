{
  "apiServer": {
    "http": {
      "port": 7772
    },
    "routes": [
      {
        "id": "access-log-route",
        "urlPath": "/*"
      },
      {
        "id": "getBruteForceConfig",
        "method": "GET",
        "urlPath": "/bruteforce/config"
      },
      {
        "id": "getUserBruteForceAttempts",
        "method": "GET",
        "urlPath": "/bruteforce/:counterName/identifier/:identifier"
      },
      {
        "id": "deleteUserBruteForceAttempts",
        "method": "DELETE",
        "urlPath": "/bruteforce/:counterName/identifier/:identifier"
      },
      {
        "id": "deleteBruteForceAttempts",
        "method": "DELETE",
        "urlPath": "/bruteforce/:counterName/identifiers"
      },
      {
        "id": "createBruteForceAttempts",
        "method": "POST",
        "urlPath": "/bruteforce/:counterName/identifier/:identifier/:count/:timestamp"
      }
    ]
  },
  "registry:routes": {
    "access-log-route":              { "main": "com.cloudentity.tools.vertx.server.api.routes.impl.AccessLogRoute" },
    "getBruteForceConfig":           { "main": "com.cloudentity.edge.admin.route.bruteforce.GetBruteForceConfigRoute" },
    "getUserBruteForceAttempts":     { "main": "com.cloudentity.edge.admin.route.bruteforce.GetUserBruteForceAttemptsRoute" },
    "deleteUserBruteForceAttempts":  { "main": "com.cloudentity.edge.admin.route.bruteforce.DeleteUserBruteForceAttemptsRoute" },
    "deleteBruteForceAttempts":      { "main": "com.cloudentity.edge.admin.route.bruteforce.DeleteBruteForceAttemptsRoute" },
    "createBruteForceAttempts":      { "main": "com.cloudentity.edge.admin.route.bruteforce.SetBruteForceCounterTestRoute" }
  },
  "vertx": {
    "logger-delegate-factory-class-name": "io.vertx.core.logging.SLF4JLogDelegateFactory"
  },
  "orchis": {
    "app": {
      "port": 7770,
      "serverVerticles": 1,
      "rules": "$ref:rules"
    },
    "jwt": {
      "secret": "secret",
      "issuer": "test-orchis-api-gateway",
      "expiresIn": "PT60S"
    }
  },
  "registry:request-plugins": {
    "plugin:bruteForce": { "main": "com.cloudentity.edge.plugin.impl.bruteforce.BruteForcePlugin" },
    "plugin:ping": { "main": "com.cloudentity.edge.plugin.impl.test.PingPlugin" }
  },
  "registry:response-plugins": {
  },
  "registry:sd": {
    "sd": { "main": "com.cloudentity.tools.vertx.sd.SdVerticle" }
  },
  "registry:system": {
    "fixed-sd-provider": { "main": "com.cloudentity.tools.vertx.sd.provider.FixedSdProvider" },
    "cache": { "main": "com.cloudentity.tools.vertx.hazelcast.inmemory.InMemoryHazelcastVerticle" }
  },
  "fixed-sd-provider": {
    "records": [
    ]
  },
  "rules": [
    {
      "default": {
        "targetHost": "virtual",
        "targetPort": 0
      },
      "endpoints": [
        {
          "method": "GET",
          "pathPattern": "/brute-force-protected-1",
          "requestPlugins": [
            {
              "name": "bruteForce",
              "conf": {
                "maxAttempts": 3,
                "blockSpan": 5,
                "blockFor": 10,
                "successCodes": [],
                "errorCodes": [
                  200
                ],
                "identifier": {
                  "location": "header",
                  "name": "identifier"
                },
                "lockedResponse": {},
                "counterName": "brute-force-protected-1"
              }
            },
            {
              "name": "ping",
              "conf": {
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/brute-force-protected-2",
          "requestPlugins": [
            {
              "name": "bruteForce",
              "conf": {
                "maxAttempts": 3,
                "blockSpan": 5,
                "blockFor": 10,
                "successCodes": [],
                "errorCodes": [
                  200
                ],
                "identifier": {
                  "location": "header",
                  "name": "identifier"
                },
                "lockedResponse": {},
                "counterName": "brute-force-protected-2"
              }
            },
            {
              "name": "ping",
              "conf": {
              }
            }
          ]
        }
      ]
    }
  ]
}
