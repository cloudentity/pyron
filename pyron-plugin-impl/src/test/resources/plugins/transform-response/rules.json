{
  "env": {
    "PLUGIN_TRANSFORM_RESPONSE_CONF_REF": "$ref:transform-response-conf"
  },
  "transform-response-conf": {
    "param": "confParamValue"
  },
  "rules": [
    {
      "default": {
        "targetHost": "localhost",
        "targetPort": 7760
      },
      "endpoints": [
        {
          "method": "GET",
          "pathPattern": "/body-from-path-param/{param}",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "body": {
                  "set": {
                    "attr": "$pathParams.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/body-from-query-param",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "body": {
                  "set": {
                    "attr": "$queryParams.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/body-from-cookie",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "body": {
                  "set": {
                    "attr": "$cookies.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/body-from-conf",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "body": {
                  "set": {
                    "attr": "$conf.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/fixed-header",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "value"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-different-response-header",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$headers.userUuid"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-path-param/{param}",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$pathParams.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-query-param",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$queryParams.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-cookie",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$cookies.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-response-body",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$body.h"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-conf",
          "responsePlugins": [
            {
              "name": "transform-response",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$conf.param"
                  }
                }
              }
            }
          ]
        }
      ]
    }
  ]
}