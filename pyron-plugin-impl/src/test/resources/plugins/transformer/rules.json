{
  "rules": [
    {
      "default": {
        "targetHost": "localhost",
        "targetPort": 7760
      },
      "endpoints": [
        {
          "method": "GET",
          "pathPattern": "/fixed-path-param/{param}",
          "rewritePath": "/fixed-path-param/{param}",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "pathParams": {
                  "set": {
                    "param": "fixed-param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/path-param-from-header/{param}",
          "rewritePath": "/path-param-from-header/{param}",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "pathParams": {
                  "set": {
                    "param": "$headers.userUuid"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "POST",
          "pathPattern": "/fixed-body",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "body": {
                  "set": {
                    "attr": "value"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "POST",
          "pathPattern": "/body-from-path-param/{param}",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "body": {
                  "set": {
                    "attr": "$pathParams.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "POST",
          "pathPattern": "/body-dropped",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "body": {
                  "drop": true
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/fixed-header",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "headers": {
                  "set": {
                    "H": "value"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-path-param/{param}",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$pathParams.param"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/header-from-body",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "headers": {
                  "set": {
                    "H": "$body.h"
                  }
                }
              }
            }
          ]
        },
        {
          "method": "GET",
          "pathPattern": "/dyn-header-from-body",
          "requestPlugins": [
            {
              "name": "transform-request",
              "conf": {
                "body": {},
                "headers": {
                  "set": {
                    "DSKey": {
                      "path": "$body.scp",
                      "pattern": "env.{num}",
                      "output": "{num}"
                    },
                    "X-SCP-Payment": {
                      "path": "$body.scp",
                      "pattern": "payment_{id}",
                      "output": "{id}"
                    },
                    "X-SCP-Transfer": {
                      "path": "$body.scp",
                      "pattern": "transfer.{id}",
                      "output": "{id}"
                    }
                  }
                }
              }
            }
          ]
        }
      ]
    }
  ]
}